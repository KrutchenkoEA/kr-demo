import{c as d}from"./chunk-4XYOG24P.js";import{e as p}from"./chunk-47JRDGKM.js";import{s as m}from"./chunk-76LGIJVN.js";import{$b as u,Ab as l,Ia as o,Mc as c,Ob as a,jb as n,n as r,vc as h}from"./chunk-BNTXLAQM.js";var f=class s{constructor(i,t,e,g){this.ngControl=i;this.elementRef=t;this.focusMonitor=e;this.cdr=g;this._id=`krui-input-${++s.counter}`,this.controlType=this.elementRef.nativeElement.tagName.toLocaleLowerCase()}static counter=0;kruiInputClass="";size="md";floatPlaceholder=!1;get id(){return this._id}get value(){return this.ngControl?.value??this.elementRef.nativeElement.value}get disabled(){return this.elementRef.nativeElement.disabled}get hasError(){return(this.ngControl?.invalid&&this.ngControl?.touched)??!1}get placeholder(){return this.elementRef.nativeElement.placeholder}focused=!1;isButton=!1;controlType;stateChanges=new r;_id;get class(){return`krui-input krui-input--${this.size} ${this.kruiInputClass}`}ngOnInit(){this.setFloatPlaceholder(),this.ngControl?(this.ngControl.valueChanges?.subscribe(()=>this.stateChanges.next()),this.ngControl.statusChanges?.subscribe(()=>this.stateChanges.next())):this.elementRef.nativeElement.addEventListener("input",i=>{this.stateChanges.next()}),this.focusMonitor.monitor(this.elementRef).subscribe(i=>{this.focused=!!i,this.stateChanges.next()}),this.stateChanges.subscribe(()=>{this.setFloatPlaceholder()})}setFloatPlaceholder(){if(!this.floatPlaceholder||this.size==="sm")return;let t=this.elementRef.nativeElement.closest("div")?.getElementsByTagName("krui-label")[0];if(!t&&this.value!==null&&this.value!==void 0&&this.value?.toString()?.length>0){let e=document.createElement("krui-label");e.id=`label-${this.id}`,e.innerHTML=this.placeholder,e.className="krui-input-float-placeholder",this.elementRef.nativeElement.insertAdjacentElement("beforebegin",e),this.elementRef.nativeElement.className=`krui-input krui-input--${this.size} ${this.kruiInputClass} krui-input--padding-${this.size}`}else(this.value===null||this.value===void 0||this.value?.toString()?.length===0)&&(this.elementRef.nativeElement.className=`krui-input krui-input--${this.size} ${this.kruiInputClass}`,t?.remove());if(this.elementRef.nativeElement.tagName==="TEXTAREA"){let e=this.elementRef.nativeElement.style;e.marginTop="16px",e.paddingTop="2px"}this.cdr.markForCheck()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.stateChanges.complete(),this.stateChanges.unsubscribe()}static \u0275fac=function(t){return new(t||s)(n(p,10),n(o),n(m),n(c))};static \u0275dir=l({type:s,selectors:[["select","kruiInput",""],["input","kruiInput",""],["textarea","kruiInput",""]],hostVars:3,hostBindings:function(t,e){t&2&&(u("id",e.id),a(e.class))},inputs:{kruiInputClass:"kruiInputClass",size:"size",floatPlaceholder:"floatPlaceholder"},exportAs:["kruiInput"],standalone:!1,features:[h([{provide:d,useExisting:s}])]})};export{f as a};
