<div class="logo">
  <span> | KR-UI-Kit</span><span>&nbsp;| v{{ version }}</span>
</div>

<header class="header">
  <mat-icon class="krui-icon--sm" fontIcon="search"></mat-icon>
  <input
    (ngModelChange)="filterBroadcast$.next($event)"
    [ngModel]="query"
    class="search"
    placeholder="Найти"
    type="text"
  />
</header>

<ng-container *ngIf="filteredItems.length">
  <ng-container
    *ngTemplateOutlet="menu; context: { level: 1, items: filteredItems }"
  >
  </ng-container>
</ng-container>

<span *ngIf="!filteredItems.length" class="empty-msg">Нет элеменов</span>

<footer class="footer">
  <span class="flex-divider"></span>
  <krui-toggle
    (ngModelChange)="themeChange.emit($event ? 'light' : 'dark')"
    [ngModel]="theme === 'light'"
    class="krui-mr--xs"
    iconOff="kruiIconThemeLightSun"
    iconOn="kruiIconThemeDarkMoon"
    size="lg"
  ></krui-toggle>
</footer>

<ng-template #menu let-items="items" let-level="level">
  <ul [class]="'menu menu--level-' + level">
    <li
      *ngFor="let item of items"
      [class.menu-item--disabled]="item.disabled"
      [class.menu-item--selected]="isActive(item.href)"
      class="menu-item"
    >
      <a (click)="onItemClick(item)" class="menu-item__link">
        <mat-icon *ngIf="level === 1" [fontIcon]="item.iconUrl ?? 'settings'"
                  class="menu-item__link__icon krui-icon--xs"></mat-icon>
        <span *ngIf="level !== 1" class="menu-item__link__icon krui-icon--xs"></span>
        <span class="menu-item__link__text">{{ item.label }}</span>
        <span *ngIf="item.badge" class="krui-tag krui-tag--primary">
          {{ item.badge }}
        </span>
        <mat-icon *ngIf="level === 1" [fontIcon]="   item.expanded
              ? 'keyboard_arrow_down'
              : 'keyboard_arrow_right'"></mat-icon>
      </a>

      <div *ngIf="item.children?.length && item.expanded" @slideInOutTop>
        <ng-container
          *ngTemplateOutlet="
            menu;
            context: { level: level + 1, items: item.children }
          "
        >
        </ng-container>
      </div>
    </li>
  </ul>
</ng-template>
